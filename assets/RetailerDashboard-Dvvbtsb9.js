import{d as h,r as s,j as e,a as g}from"./index-BWStPa2h.js";import{F as S,c as V,d as B,e as G}from"./index-rN5PxlGS.js";import{M as c}from"./Model-CNCi-wLF.js";import{m as C}from"./createLucideIcon-BqLr22Er.js";const H={createProduct:async l=>h.post("/product/create-product",l),getProducts:async()=>h.get("/product/getProductDetails"),removeProduct:async l=>h.post("/product/remove-product",l)},K=()=>{const[l,Q]=s.useState(null),[k,E]=s.useState(!0),[b,R]=s.useState(null),[f,N]=s.useState(!1),[j,y]=s.useState(!1),[v,u]=s.useState(!1),[w,m]=s.useState(!1),[p,x]=s.useState([]),[P,A]=s.useState([]),[a,d]=s.useState({Name:"",PhoneNumber:"",Address:""}),[o,i]=s.useState({Name:"",Price:"",Quantity:0,Location:"",Tax:0}),{createProduct:D,getProducts:M,removeProduct:U}=H;s.useEffect(()=>{const t=async()=>{try{const{data:r}=await g.getProfile(!0);Q(r.retailer.store),d({Name:r.retailer.Store.StoreName,PhoneNumber:r.retailer.Store.PhoneNumber,Address:r.retailer.Store.StoreAddress})}catch(r){console.error("Error fetching store data:",r)}finally{E(!1)}},n=async()=>{try{const r=await M();x(r.data)}catch(r){console.error("Error fetching products:",r)}},O=async()=>{try{const r=await g.getNotifications();A(r.data)}catch(r){console.error("Error fetching notifications:",r)}};t(),n(),O()},[]);const q=async()=>{try{const t=await D(o);x([...p,t.data]),u(!1)}catch(t){console.error("Error adding product:",t)}},L=async t=>{try{await U({id:t}),x(p.filter(n=>n.ProductID!==t))}catch(n){console.error("Error removing product:",n)}},T=async()=>{try{await g.updateProfile(a),m(!1)}catch(t){console.error("Error updating profile:",t)}},F=t=>{R(t.QRCode),N(!0)};return k?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900 p-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-purple-600",children:["Welcome, ",a.Name]}),e.jsxs("div",{className:"flex gap-2 md:gap-4 mt-4 md:mt-0",children:[e.jsxs("button",{onClick:()=>y(!0),className:"bg-teal-600 px-5 md:px-5 py-2 md:py-2 rounded-lg text-white hover:bg-teal-700 transition-all text-sm md:text-base",children:[e.jsx(S,{className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Store QR"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"bg-green-600 px-5 md:px-5 py-2 md:py-2 rounded-lg text-white hover:bg-green-700 transition-all text-sm md:text-base",children:[e.jsx(V,{className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Update Profile"})]}),e.jsxs("button",{className:"bg-amber-500 px-5 md:px-5 py-2 md:py-2 rounded-lg text-white hover:bg-amber-600 transition-all text-sm md:text-base relative",children:[e.jsx(B,{className:"inline mr-1 md:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Notifications"}),P.length>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-600 text-white text-xs px-2 py-1 rounded-full",children:P.length})]})]})]}),e.jsxs(C.div,{className:"bg-white p-6 rounded-lg shadow-lg mb-6 backdrop-filter backdrop-blur-lg bg-opacity-20",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Profile Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Store Name:"})," ",a.Name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone Number:"})," ",a.PhoneNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",a.Address]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4",children:p.map((t,n)=>e.jsxs(C.div,{className:"bg-white p-5 rounded-2xl shadow-md hover:shadow-lg transition-all border border-gray-200",whileHover:{scale:1.05},children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:t.Name}),e.jsxs("p",{className:"text-gray-700 text-lg",children:["Price: ",e.jsxs("span",{className:"font-semibold",children:["â‚¹",t.Price]})]}),e.jsxs("p",{className:"text-gray-700 text-lg",children:["Stock: ",e.jsx("span",{className:"font-semibold",children:t.Quantity})]}),e.jsxs("p",{className:"text-gray-700 text-lg",children:["Tax: ",e.jsxs("span",{className:"font-semibold",children:[t.Tax,"%"]})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>F(t),className:"bg-purple-600 w-full px-5 py-2.5 rounded-xl text-white font-medium hover:bg-purple-700 transition-all flex items-center justify-center",children:[e.jsx(S,{className:"mr-2"})," View QR"]}),e.jsx("button",{onClick:()=>L(t.ProductID),className:"bg-red-600 w-full px-5 py-2.5 rounded-xl text-white font-medium hover:bg-red-700 transition-all",children:"Remove"})]})]},n))}),e.jsx("button",{onClick:()=>u(!0),className:"fixed bottom-6 right-6 bg-purple-600 p-4 rounded-full text-white hover:bg-purple-700 transition-all",children:e.jsx(G,{})}),f&&e.jsx(c,{isOpen:f,onClose:()=>N(!1),title:"QR Code",children:b?e.jsx("img",{src:b,alt:"QR Code",className:"mx-auto w-full max-w-xs"}):e.jsx("p",{className:"text-center",children:"No QR Code available"})}),j&&e.jsx(c,{isOpen:j,onClose:()=>y(!1),title:"Store QR Code",children:l!=null&&l.QRCode?e.jsx("img",{src:l.QRCode,alt:"Store QR Code",className:"mx-auto w-full max-w-xs"}):e.jsx("p",{className:"text-center",children:"No Store QR Code available"})}),w&&e.jsxs(c,{isOpen:w,onClose:()=>m(!1),title:"Update Profile",children:[e.jsx("input",{type:"text",placeholder:"Name",value:a.Name,onChange:t=>d({...a,Name:t.target.value}),className:"w-full p-2 mb-4 rounded-lg border border-gray-300"}),e.jsx("input",{type:"text",placeholder:"Phone Number",value:a.PhoneNumber,onChange:t=>d({...a,PhoneNumber:t.target.value}),className:"w-full p-2 mb-4 rounded-lg border border-gray-300"}),e.jsx("input",{type:"text",placeholder:"Address",value:a.Address,onChange:t=>d({...a,Address:t.target.value}),className:"w-full p-2 mb-4 rounded-lg border border-gray-300"}),e.jsx("button",{onClick:T,className:"bg-purple-600 px-4 py-2 text-white rounded-lg hover:bg-purple-700 transition-all",children:"Update"})]}),v&&e.jsx(c,{isOpen:v,onClose:()=>u(!1),title:"Add Product",children:e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),e.jsx("input",{type:"text",placeholder:"Enter product name",value:o.Name,onChange:t=>i({...o,Name:t.target.value}),className:"w-full p-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",placeholder:"Enter price",value:o.Price,onChange:t=>i({...o,Price:t.target.value}),className:"w-full p-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),e.jsx("input",{type:"number",placeholder:"Enter quantity",value:o.Quantity,min:0,onChange:t=>i({...o,Quantity:t.target.value}),className:"w-full p-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Location"}),e.jsx("input",{type:"text",placeholder:"Enter product location",value:o.Location,onChange:t=>i({...o,Location:t.target.value}),className:"w-full p-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax"}),e.jsx("input",{type:"Number",placeholder:"Enter Gst %",value:o.Tax,min:0,onChange:t=>i({...o,Tax:t.target.value}),className:"w-full p-3 rounded-lg border border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none bg-white",required:!0})]}),e.jsx("button",{onClick:q,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 px-4 py-3 rounded-lg text-white hover:from-purple-700 hover:to-indigo-700 active:scale-95 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-all",children:"Add Product"})]})})})]})};export{K as default};
